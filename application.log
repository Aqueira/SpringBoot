2024-12-03T13:10:18.085+01:00  INFO 14643 --- [Test worker] org.example.UserTest                     : Starting UserTest using Java 17.0.13 with PID 14643 (started by serafim in /home/serafim/Downloads/demo)
2024-12-03T13:10:18.102+01:00  INFO 14643 --- [Test worker] org.example.UserTest                     : No active profile set, falling back to 1 default profile: "default"
2024-12-03T13:10:18.125+01:00 DEBUG 14643 --- [Test worker] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5b12012e
2024-12-03T13:10:19.642+01:00  INFO 14643 --- [Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-03T13:10:19.720+01:00  INFO 14643 --- [Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2024-12-03T13:10:20.631+01:00  INFO 14643 --- [Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-03T13:10:20.707+01:00  INFO 14643 --- [Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2024-12-03T13:10:20.766+01:00  INFO 14643 --- [Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-12-03T13:10:21.086+01:00  INFO 14643 --- [Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-12-03T13:10:21.119+01:00  INFO 14643 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool - Starting...
2024-12-03T13:10:21.810+01:00  INFO 14643 --- [Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool - Added connection org.postgresql.jdbc.PgConnection@6f22c1f1
2024-12-03T13:10:21.811+01:00  INFO 14643 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool - Start completed.
2024-12-03T13:10:21.890+01:00  WARN 14643 --- [Test worker] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-12-03T13:10:22.748+01:00  INFO 14643 --- [Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-12-03T13:10:22.920+01:00  INFO 14643 --- [Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-03T13:10:23.182+01:00  INFO 14643 --- [Test worker] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-12-03T13:10:24.100+01:00  WARN 14643 --- [Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-03T13:10:24.295+01:00 DEBUG 14643 --- [Test worker] s.w.s.m.m.a.RequestMappingHandlerMapping : 24 mappings in 'requestMappingHandlerMapping'
2024-12-03T13:10:24.431+01:00 DEBUG 14643 --- [Test worker] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/resources/**] in 'resourceHandlerMapping'
2024-12-03T13:10:24.459+01:00 DEBUG 14643 --- [Test worker] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-12-03T13:10:24.485+01:00 DEBUG 14643 --- [Test worker] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-12-03T13:10:24.871+01:00  WARN 14643 --- [Test worker] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates, check your Thymeleaf configuration, or set spring.thymeleaf.check-template-location=false)
2024-12-03T13:10:24.916+01:00  INFO 14643 --- [Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-12-03T13:10:24.917+01:00  INFO 14643 --- [Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2024-12-03T13:10:24.919+01:00  INFO 14643 --- [Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2024-12-03T13:10:24.979+01:00  INFO 14643 --- [Test worker] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2024-12-03T13:10:25.006+01:00  INFO 14643 --- [Test worker] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#447cdbaa:0/SimpleConnection@19d8d11f [delegate=amqp://guest@127.0.0.1:5672/, localPort=44506]
2024-12-03T13:10:25.169+01:00  INFO 14643 --- [Test worker] org.example.UserTest                     : Started UserTest in 7.597 seconds (process running for 8.764)
2024-12-03T13:10:25.881+01:00 DEBUG 14643 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:10:25.908+01:00 DEBUG 14643 --- [Test worker] org.hibernate.SQL                        : 
    select
        c1_0.customer_id,
        c1_0.name,
        c1_0.sector,
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username,
        c1_0.version 
    from
        customers c1_0 
    left join
        users u1_0 
            on u1_0.user_id=c1_0.user_id 
    where
        c1_0.user_id=?
2024-12-03T13:10:26.003+01:00 DEBUG 14643 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:10:26.113+01:00 DEBUG 14643 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:10:26.116+01:00 DEBUG 14643 --- [Test worker] org.hibernate.SQL                        : 
    select
        c1_0.customer_id,
        c1_0.name,
        c1_0.sector,
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username,
        c1_0.version 
    from
        customers c1_0 
    left join
        users u1_0 
            on u1_0.user_id=c1_0.user_id 
    where
        c1_0.user_id=?
2024-12-03T13:10:26.123+01:00 DEBUG 14643 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:10:26.126+01:00 DEBUG 14643 --- [Test worker] org.hibernate.SQL                        : 
    select
        c1_0.customer_id,
        c1_0.name,
        c1_0.sector,
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username,
        c1_0.version 
    from
        customers c1_0 
    left join
        users u1_0 
            on u1_0.user_id=c1_0.user_id 
    where
        c1_0.user_id=?
2024-12-03T13:10:26.131+01:00  INFO 14643 --- [Test worker] o.e.c.filters.JwtAuthenticationFilter    : Authorities for user: [ROLE_USER]
2024-12-03T13:10:26.182+01:00 DEBUG 14643 --- [Test worker] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.example.user.controllers.UserController#update(Long, RequestUserDTO)
2024-12-03T13:10:26.246+01:00 DEBUG 14643 --- [Test worker] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RequestUserDTO[username=newusernmae, password=newpassword, role=USER, customer=null]]
2024-12-03T13:10:26.310+01:00  INFO 14643 --- [Test worker] org.example.logging.loggingAspect        : 
Name:org.example.user.controllers.UserController
	Args:update
2024-12-03T13:10:26.319+01:00 DEBUG 14643 --- [Test worker] org.hibernate.SQL                        : 
    update
        users u1_0 
    set
        username=?,
        password=?,
        role=? 
    where
        u1_0.user_id=?
2024-12-03T13:10:26.337+01:00 DEBUG 14643 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        c1_0.customer_id,
        c1_0.name,
        c1_0.sector,
        c1_0.version,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    join
        customers c1_0 
            on u1_0.user_id=c1_0.user_id 
    where
        u1_0.user_id=?
2024-12-03T13:10:26.339+01:00  WARN 14643 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] o.e.c.r.CacheInvalidationListener        : Cache #1 -> invalidated successfully!
2024-12-03T13:10:26.344+01:00 DEBUG 14643 --- [Test worker] org.hibernate.SQL                        : 
    select
        o1_0.customer_id,
        o1_0.order_id,
        o1_0.deliver_to 
    from
        orders o1_0 
    where
        o1_0.customer_id=?
2024-12-03T13:10:26.354+01:00 DEBUG 14643 --- [Test worker] org.hibernate.SQL                        : 
    select
        li1_0.order_id,
        li1_0.line_item_id 
    from
        line_items li1_0 
    where
        li1_0.order_id=?
2024-12-03T13:10:26.374+01:00  INFO 14643 --- [Test worker] org.example.logging.loggingAspect        : 
Result: <200 OK OK,ResponseUserDTO[id=1, username=newusernmae, password=newpassword, role=USER, customer=ResponseCustomerDTO[id=1, name=username1, sector=sector, orders=[ResponseOrderDTO[id=1, deliverTo=123 Main St, City, customerId=1, lineItems=[ResponseLineItemDTO[id=1, orderId=1, products=null]]]]]],[]>
	
2024-12-03T13:10:26.384+01:00 DEBUG 14643 --- [Test worker] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-12-03T13:10:26.385+01:00 DEBUG 14643 --- [Test worker] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ResponseUserDTO[id=1, username=newusernmae, password=newpassword, role=USER, customer=ResponseCustom (truncated)...]
2024-12-03T13:10:26.415+01:00 DEBUG 14643 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@5b12012e, started on Tue Dec 03 13:10:18 CET 2024
2024-12-03T13:10:26.419+01:00  INFO 14643 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2024-12-03T13:10:27.343+01:00  INFO 14643 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2024-12-03T13:10:27.349+01:00  INFO 14643 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-03T13:10:27.360+01:00  INFO 14643 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool - Shutdown initiated...
2024-12-03T13:10:27.364+01:00  INFO 14643 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool - Shutdown completed.
2024-12-03T13:10:47.342+01:00  INFO 14920 --- [Test worker] org.example.UserTest                     : Starting UserTest using Java 17.0.13 with PID 14920 (started by serafim in /home/serafim/Downloads/demo)
2024-12-03T13:10:47.343+01:00  INFO 14920 --- [Test worker] org.example.UserTest                     : No active profile set, falling back to 1 default profile: "default"
2024-12-03T13:10:47.354+01:00 DEBUG 14920 --- [Test worker] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5b12012e
2024-12-03T13:10:47.811+01:00  INFO 14920 --- [Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-03T13:10:47.863+01:00  INFO 14920 --- [Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 47 ms. Found 4 JPA repository interfaces.
2024-12-03T13:10:48.400+01:00  INFO 14920 --- [Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-03T13:10:48.431+01:00  INFO 14920 --- [Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2024-12-03T13:10:48.452+01:00  INFO 14920 --- [Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-12-03T13:10:48.640+01:00  INFO 14920 --- [Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-12-03T13:10:48.658+01:00  INFO 14920 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool - Starting...
2024-12-03T13:10:48.853+01:00  INFO 14920 --- [Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool - Added connection org.postgresql.jdbc.PgConnection@6104691c
2024-12-03T13:10:48.854+01:00  INFO 14920 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool - Start completed.
2024-12-03T13:10:48.874+01:00  WARN 14920 --- [Test worker] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-12-03T13:10:49.540+01:00  INFO 14920 --- [Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-12-03T13:10:49.608+01:00  INFO 14920 --- [Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-03T13:10:49.824+01:00  INFO 14920 --- [Test worker] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-12-03T13:10:50.554+01:00  WARN 14920 --- [Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-03T13:10:50.701+01:00 DEBUG 14920 --- [Test worker] s.w.s.m.m.a.RequestMappingHandlerMapping : 24 mappings in 'requestMappingHandlerMapping'
2024-12-03T13:10:50.819+01:00 DEBUG 14920 --- [Test worker] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/resources/**] in 'resourceHandlerMapping'
2024-12-03T13:10:50.846+01:00 DEBUG 14920 --- [Test worker] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-12-03T13:10:50.877+01:00 DEBUG 14920 --- [Test worker] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-12-03T13:10:51.151+01:00  WARN 14920 --- [Test worker] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates, check your Thymeleaf configuration, or set spring.thymeleaf.check-template-location=false)
2024-12-03T13:10:51.199+01:00  INFO 14920 --- [Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-12-03T13:10:51.200+01:00  INFO 14920 --- [Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2024-12-03T13:10:51.201+01:00  INFO 14920 --- [Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2024-12-03T13:10:51.240+01:00  INFO 14920 --- [Test worker] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2024-12-03T13:10:51.270+01:00  INFO 14920 --- [Test worker] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#2fd16368:0/SimpleConnection@7a61020a [delegate=amqp://guest@127.0.0.1:5672/, localPort=51378]
2024-12-03T13:10:51.303+01:00  INFO 14920 --- [Test worker] org.example.UserTest                     : Started UserTest in 4.159 seconds (process running for 4.842)
2024-12-03T13:10:51.634+01:00  WARN 14920 --- [Test worker] org.example.UserTest                     : AuthenticationCreate(success) started!
2024-12-03T13:10:51.754+01:00 DEBUG 14920 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:10:51.763+01:00 DEBUG 14920 --- [Test worker] org.hibernate.SQL                        : 
    select
        c1_0.customer_id,
        c1_0.name,
        c1_0.sector,
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username,
        c1_0.version 
    from
        customers c1_0 
    left join
        users u1_0 
            on u1_0.user_id=c1_0.user_id 
    where
        c1_0.user_id=?
2024-12-03T13:10:51.847+01:00 DEBUG 14920 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:10:51.948+01:00 DEBUG 14920 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:10:51.950+01:00 DEBUG 14920 --- [Test worker] org.hibernate.SQL                        : 
    select
        c1_0.customer_id,
        c1_0.name,
        c1_0.sector,
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username,
        c1_0.version 
    from
        customers c1_0 
    left join
        users u1_0 
            on u1_0.user_id=c1_0.user_id 
    where
        c1_0.user_id=?
2024-12-03T13:10:51.958+01:00 DEBUG 14920 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:10:51.960+01:00 DEBUG 14920 --- [Test worker] org.hibernate.SQL                        : 
    select
        c1_0.customer_id,
        c1_0.name,
        c1_0.sector,
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username,
        c1_0.version 
    from
        customers c1_0 
    left join
        users u1_0 
            on u1_0.user_id=c1_0.user_id 
    where
        c1_0.user_id=?
2024-12-03T13:10:51.966+01:00  INFO 14920 --- [Test worker] o.e.c.filters.JwtAuthenticationFilter    : Authorities for user: [ROLE_USER]
2024-12-03T13:10:51.977+01:00 DEBUG 14920 --- [Test worker] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.example.user.controllers.UserController#create(RequestUserDTO)
2024-12-03T13:10:52.020+01:00 DEBUG 14920 --- [Test worker] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RequestUserDTO[username=newUsername, password=newPassword, role=USER, customer=RequestCustomerDTO[na (truncated)...]
2024-12-03T13:10:52.044+01:00 DEBUG 14920 --- [Test worker] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler org.example.configurations.globalExceptionHandler.GlobalExceptionHandler#handleAuthorizationDeniedException(AuthorizationDeniedException)
2024-12-03T13:10:52.049+01:00 DEBUG 14920 --- [Test worker] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-12-03T13:10:52.050+01:00 DEBUG 14920 --- [Test worker] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Access DeniedAccess Denied"]
2024-12-03T13:10:52.053+01:00 DEBUG 14920 --- [Test worker] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2024-12-03T13:10:52.106+01:00 DEBUG 14920 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@5b12012e, started on Tue Dec 03 13:10:47 CET 2024
2024-12-03T13:10:52.112+01:00  INFO 14920 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2024-12-03T13:10:52.296+01:00  INFO 14920 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2024-12-03T13:10:52.304+01:00  INFO 14920 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-03T13:10:52.307+01:00  INFO 14920 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool - Shutdown initiated...
2024-12-03T13:10:52.313+01:00  INFO 14920 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool - Shutdown completed.
2024-12-03T13:11:37.000+01:00  INFO 15252 --- [Test worker] org.example.UserTest                     : Starting UserTest using Java 17.0.13 with PID 15252 (started by serafim in /home/serafim/Downloads/demo)
2024-12-03T13:11:37.002+01:00  INFO 15252 --- [Test worker] org.example.UserTest                     : No active profile set, falling back to 1 default profile: "default"
2024-12-03T13:11:37.017+01:00 DEBUG 15252 --- [Test worker] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5b12012e
2024-12-03T13:11:37.509+01:00  INFO 15252 --- [Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-03T13:11:37.558+01:00  INFO 15252 --- [Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 44 ms. Found 4 JPA repository interfaces.
2024-12-03T13:11:38.075+01:00  INFO 15252 --- [Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-03T13:11:38.107+01:00  INFO 15252 --- [Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2024-12-03T13:11:38.127+01:00  INFO 15252 --- [Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-12-03T13:11:38.309+01:00  INFO 15252 --- [Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-12-03T13:11:38.327+01:00  INFO 15252 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool - Starting...
2024-12-03T13:11:38.529+01:00  INFO 15252 --- [Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool - Added connection org.postgresql.jdbc.PgConnection@6104691c
2024-12-03T13:11:38.530+01:00  INFO 15252 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool - Start completed.
2024-12-03T13:11:38.551+01:00  WARN 15252 --- [Test worker] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-12-03T13:11:39.204+01:00  INFO 15252 --- [Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-12-03T13:11:39.273+01:00  INFO 15252 --- [Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-03T13:11:39.474+01:00  INFO 15252 --- [Test worker] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-12-03T13:11:40.205+01:00  WARN 15252 --- [Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-03T13:11:40.352+01:00 DEBUG 15252 --- [Test worker] s.w.s.m.m.a.RequestMappingHandlerMapping : 24 mappings in 'requestMappingHandlerMapping'
2024-12-03T13:11:40.461+01:00 DEBUG 15252 --- [Test worker] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/resources/**] in 'resourceHandlerMapping'
2024-12-03T13:11:40.490+01:00 DEBUG 15252 --- [Test worker] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-12-03T13:11:40.520+01:00 DEBUG 15252 --- [Test worker] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-12-03T13:11:40.788+01:00  WARN 15252 --- [Test worker] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates, check your Thymeleaf configuration, or set spring.thymeleaf.check-template-location=false)
2024-12-03T13:11:40.838+01:00  INFO 15252 --- [Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-12-03T13:11:40.839+01:00  INFO 15252 --- [Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2024-12-03T13:11:40.840+01:00  INFO 15252 --- [Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2024-12-03T13:11:40.882+01:00  INFO 15252 --- [Test worker] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2024-12-03T13:11:40.907+01:00  INFO 15252 --- [Test worker] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#3699c795:0/SimpleConnection@38dd3252 [delegate=amqp://guest@127.0.0.1:5672/, localPort=45074]
2024-12-03T13:11:40.942+01:00  INFO 15252 --- [Test worker] org.example.UserTest                     : Started UserTest in 4.191 seconds (process running for 4.883)
2024-12-03T13:11:41.281+01:00  WARN 15252 --- [Test worker] org.example.UserTest                     : AuthenticationCreate(success) started!
2024-12-03T13:11:41.420+01:00 DEBUG 15252 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:11:41.429+01:00 DEBUG 15252 --- [Test worker] org.hibernate.SQL                        : 
    select
        c1_0.customer_id,
        c1_0.name,
        c1_0.sector,
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username,
        c1_0.version 
    from
        customers c1_0 
    left join
        users u1_0 
            on u1_0.user_id=c1_0.user_id 
    where
        c1_0.user_id=?
2024-12-03T13:11:41.525+01:00 DEBUG 15252 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:11:41.668+01:00 DEBUG 15252 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:11:41.670+01:00 DEBUG 15252 --- [Test worker] org.hibernate.SQL                        : 
    select
        c1_0.customer_id,
        c1_0.name,
        c1_0.sector,
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username,
        c1_0.version 
    from
        customers c1_0 
    left join
        users u1_0 
            on u1_0.user_id=c1_0.user_id 
    where
        c1_0.user_id=?
2024-12-03T13:11:41.677+01:00 DEBUG 15252 --- [Test worker] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2024-12-03T13:11:41.679+01:00 DEBUG 15252 --- [Test worker] org.hibernate.SQL                        : 
    select
        c1_0.customer_id,
        c1_0.name,
        c1_0.sector,
        u1_0.user_id,
        u1_0.password,
        u1_0.role,
        u1_0.username,
        c1_0.version 
    from
        customers c1_0 
    left join
        users u1_0 
            on u1_0.user_id=c1_0.user_id 
    where
        c1_0.user_id=?
2024-12-03T13:11:41.684+01:00  INFO 15252 --- [Test worker] o.e.c.filters.JwtAuthenticationFilter    : Authorities for user: [admin::read, management::update, management::delete, management::read, admin::update, admin::delete, management::write, admin::write, ROLE_ADMIN]
2024-12-03T13:11:41.697+01:00 DEBUG 15252 --- [Test worker] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.example.user.controllers.UserController#create(RequestUserDTO)
2024-12-03T13:11:41.744+01:00 DEBUG 15252 --- [Test worker] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RequestUserDTO[username=newUsername, password=newPassword, role=USER, customer=RequestCustomerDTO[na (truncated)...]
2024-12-03T13:11:41.769+01:00  INFO 15252 --- [Test worker] org.example.logging.loggingAspect        : 
Name:org.example.user.controllers.UserController
	Args:create
2024-12-03T13:11:41.779+01:00 DEBUG 15252 --- [Test worker] org.hibernate.SQL                        : 
    insert 
    into
        users
        (password, role, username) 
    values
        (?, ?, ?) 
    returning user_id
2024-12-03T13:11:41.801+01:00 DEBUG 15252 --- [Test worker] org.hibernate.SQL                        : 
    insert 
    into
        customers
        (name, sector, user_id, version) 
    values
        (?, ?, ?, ?) 
    returning customer_id
2024-12-03T13:11:41.806+01:00  WARN 15252 --- [Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 23502
2024-12-03T13:11:41.806+01:00 ERROR 15252 --- [Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: null value in column "user_id" of relation "customers" violates not-null constraint
  Detail: Failing row contains (4, newCustomer, newSector, null, 0).
2024-12-03T13:11:41.812+01:00 ERROR 15252 --- [Test worker] org.example.logging.loggingAspect        : 
Name:create
	Args:[RequestUserDTO[username=newUsername, password=newPassword, role=USER, customer=RequestCustomerDTO[name=newCustomer, sector=newSector, orders=null]]]
2024-12-03T13:11:41.813+01:00 DEBUG 15252 --- [Test worker] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler org.example.configurations.globalExceptionHandler.GlobalExceptionHandler#handleGeneralException(Exception)
2024-12-03T13:11:41.818+01:00 DEBUG 15252 --- [Test worker] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-12-03T13:11:41.819+01:00 DEBUG 15252 --- [Test worker] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Something went wrong: could not execute statement [ERROR: null value in column "user_id" of relation (truncated)..."]
2024-12-03T13:11:41.821+01:00 DEBUG 15252 --- [Test worker] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: null value in column "user_id" of relation "customers" violates not-null constraint<EOL>  Detail: Failing row contains (4, newCustomer, newSector, null, 0).] [insert into customers (name,sector,user_id,version) values (?,?,?,?) returning customer_id]; SQL [insert into customers (name,sector,user_id,version) values (?,?,?,?) returning customer_id]; constraint [user_id" of relation "customers]]
2024-12-03T13:11:41.848+01:00 DEBUG 15252 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@5b12012e, started on Tue Dec 03 13:11:37 CET 2024
2024-12-03T13:11:41.852+01:00  INFO 15252 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2024-12-03T13:11:41.935+01:00  INFO 15252 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2024-12-03T13:11:41.941+01:00  INFO 15252 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-03T13:11:41.942+01:00  INFO 15252 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool - Shutdown initiated...
2024-12-03T13:11:41.947+01:00  INFO 15252 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool - Shutdown completed.
